---
title: Route Management System
description: Comprehensive routing and navigation system for Flutter applications
---

## Overview

The Route Management System provides a robust, type-safe routing solution that combines all routing-related functionality into a single, cohesive system. This system is designed to work seamlessly with your application's core services and provides a consistent way to handle navigation and authentication across your app.

## Key Components

### 1. Base Route Service

The foundation of the routing system, providing essential navigation functionality.

```dart
class BaseRouteService {
  // Navigation methods
  void push(String path, {Object? arguments});
  void pop();
  void pushReplacement(String path, {Object? arguments});
  
  // Route configuration
  String get initialRoute;
  String? get redirectOverride;
}
```

### 2. Authentication Route Mixin

Handles authentication-related routing logic.

```dart
mixin AuthRoute<T> on BaseRouteService {
  // Authentication state
  T? get user;
  
  // Auth-related routes
  List<String> get authTriggerRoutes;
  String get defaultAuthRoute;
  String get signInRoutePath;
  String get signUpRoutePath;
  
  // Public routes configuration
  List<String> get publicRoutes;
}
```

### 3. Go Router Integration

Provides Go Router-specific functionality.

```dart
mixin GoRouterAuthRoute<T> on GoRouterService implements AuthRoute<T> {
  // Go Router specific methods
  FutureOr<String?> goRouterRedirect(BuildContext context, GoRouterState state);
  
  // Auth-specific logging
  void routeLog(GoRouterState state);
}
```

## Getting Started

### 1. Setup

Add the required dependencies to your `pubspec.yaml`:

```yaml
dependencies:
  core_management: ^latest_version
  core_management_route_go_router: ^latest_version
```

### 2. Create Your Route Service

```dart
class MyRouteService
    extends BaseRouteService
    with GoRouterAuthRoute<User> {
  @override
  User? get user => AuthService.currentUser;
  
  @override
  List<String> get publicRoutes => ['/login', '/signup'];
  
  @override
  String get initialRoute => '/login';
}
```

## Usage Examples

### Authentication Flow

```dart
class AuthService extends BaseCoreService {
  final MyRouteService _routeService;
  
  AuthService(this._routeService);
  
  Future<void> login(String email, String password) async {
    try {
      await _authRepository.login(email, password);
      _routeService.pushReplacement('/home');
    } catch (e) {
      _routeService.showErrorSnackbar('Login failed');
    }
  }
}
```

### Protected Routes

```dart
class ProfileService extends BaseCoreService {
  final MyRouteService _routeService;
  
  ProfileService(this._routeService);
  
  Future<void> loadProfile() async {
    if (_routeService.user == null) {
      throw Exception('User not authenticated');
    }
    // Load profile data...
  }
}
```

## Best Practices

1. **Service Composition**
   - Always use dependency injection for route services
   - Keep route logic in dedicated services
   - Use mixins to compose functionality

2. **Authentication**
   - Implement proper auth state management
   - Configure public routes correctly
   - Handle unauthenticated access gracefully

3. **Navigation**
   - Use named routes consistently
   - Handle route arguments properly
   - Implement proper error handling

4. **Testing**
   - Mock route services in tests
   - Test auth flows separately
   - Verify route configurations

## Debugging

The system provides detailed logging for route changes:

```dart
// Example log output
ğŸ”„ AUTH ROUTER EVENT
â”œâ”€ ğŸ“ Route Details:
â”‚   â”œâ”€ ğŸ“ Path: /profile
â”‚   â””â”€ ğŸ”— Full URL: /profile
â”œâ”€ ğŸ” Auth Status:
â”‚   â”œâ”€ ğŸ‘¤ User: User
â”‚   â””â”€ ğŸ” Is Public Route: false
â”œâ”€ âš™ï¸ Redirect Details:
â”‚   â”œâ”€ ğŸ”„ Override: null
â”‚   â””â”€ â³ Temporary: false
```

## Troubleshooting

### Common Issues

1. **Unauthenticated Access**
   - Ensure [user](cci:1://file:///home/hayabusa/StudioProjects/butterfly/packages/core_management/lib/mixins/auth_route.dart:18:2-52:13) getter is implemented
   - Check public routes configuration
   - Verify auth state management

2. **Route Configuration**
   - Check initial route is set
   - Verify route paths are correct
   - Ensure all required routes are defined

3. **Navigation Errors**
   - Handle null arguments properly
   - Check route existence
   - Verify route parameters

## API Reference

### BaseRouteService

- `push(String path, {Object? arguments})`: Navigate to a new route
- `pop()`: Navigate back
- `pushReplacement(String path, {Object? arguments})`: Replace current route
- `initialRoute`: Get the initial route path
- `redirectOverride`: Get/set redirect override

### AuthRoute

- `user`: Get current authenticated user
- `authTriggerRoutes`: Get routes that trigger auth flow
- `publicRoutes`: Get public (non-auth) routes
- `defaultAuthRoute`: Get default auth route
- `signInRoutePath`: Get sign-in route
- `signUpRoutePath`: Get sign-up route

### GoRouterAuthRoute

- `goRouterRedirect`: Handle Go Router redirection
- `routeLog`: Log route changes with auth context

## Related Resources

- [Go Router Documentation](https://pub.dev/packages/go_router)
- [Flutter Navigation Guide](https://docs.flutter.dev/development/ui/navigation/tutorial)
- [Dependency Injection in Flutter](https://pub.dev/packages/get_it)

## Contributing

If you find any issues or want to contribute improvements, please:
1. Check the existing issues
2. Fork the repository
3. Create a feature branch
4. Submit a pull request

## License

This documentation is licensed under the MIT License.
